# Java Virtual Machine(JVM)

> JVM是模拟硬件软件，包括一套字节码指令集、寄存器、栈、垃圾回收、堆和存储方法域。与硬件没有直接的交互。

TODO ：补充思维导图

Java源文件(.java)通过Java编译器编译成为字节码(.class)，此种字节码在不同平台的不同虚拟机都是一套指令，所以可以跨平台，最后通过JVM中的解释器将字节码翻译成为特定机器上的字节码(二进制)。

## 1.线程

JVM允许一个应用并发执行多个线程。Hotspot JVM的Java线程与原生线程为一对一关系。当Java线程初始化完毕后：本地存储、缓冲区分配、同步对象、栈、程序计数器等，就会创建与之对应的原生线程。

Java线程结束后，原生线程被回收，释放原生线程和Java线程的占用资源。操作系统负责调度原生线程。将其分配到可用的CPU。当原生线程初始化完毕，就会调用Java线程的`run()`方法。

Hot Spot JVM系统级线程为如下：

| 线程           | 功能                                                         |
| -------------- | ------------------------------------------------------------ |
| 虚拟机线程     | 这个线程等待JVM安全操作出现。这些操作必须要在独立线程之中执行，因为当堆修改无法进行时，线程都需要再JVM安全点。操作类型如下：stop-the-word垃圾回收、线程栈dump、线程暂停、线程偏向锁(biased locking)解除 |
| 周期性任务线程 | 负责定时器时间（也就是中断），用来调度周期性的操作的执行。   |
| GC线程         | 这些线程支持 JVM 中不同的垃圾回收活动。                      |
| 编译器线程     | 这些线程在运行时将字节码动态编译成本地平台相关的机器码。     |
| 信号分发线程   | 这个线程接收发送到 JVM 的信号并调用适当的 JVM 方法处理。     |



## 2.JVM内存区域



## 3.JVM运行时内存



## 4.垃圾回收及算法



## 5.Java引用类型



## 6.GC分代收集&分区收集



## 7.GC垃圾收集器



## 8.JVM类加载机制



